SEGUNDO SEMESTRE ARQUITETURA DE COMPUTADORES

AULA 9: dISPOSITIVOS DE ARMAZENAMENTO EXTERNAS:

AULA A:
-Fitas magnéticas
-Tecnologia RAID (Maior desempenho e disponibilidade de dados em servidores e sistemas de grande porte.)
RAID - São conjuntos de técnicas para utilização de vários discos agrupados em paralelo, empregando redundâncias para corrigir falhas.
-Discos magnéticos:
São  ompostos por:
    MECANISMO: composto por componentes de gravação e por componentes de posicionamento.
    COMTROLADOR: composto por microprocessador, memória e interfaces com barramento.
São constituídos por um prato circular de metal ou de plástico, coberto por um material que pode ser magnetizado.
Os dados são gravados ou lidos usando uma bobina condutora (cabeçote).
A cabeça permanece estática enquanto quem gira é o prato.
-> Substrato de disco coberto com material magnetizável.
-> Substrato- era alumínio, agora é vidro:
    Maior uniformidade.
    Redução dos defeitos da superfície.
    Alturas de voo mais baixas.
    Melhor agilidez.
    Melhor resistência a choques.
Mecanismos de leitura e gravação:
    Por bobina condutora (cabeça);
    Pode ser uma cabeça ou separadas;
    O disco gira, n a cabeça.
    Gravação: 
        -Corrente pela bobina produz campo magnéticos;
        -Pulsos enviados a cabeça;
    Leitura (tradicional):
        -Campo magnético movendo-se diante da bobina gera corrente.
    Leitura: 

    Gera-se uma corrente para criar um campo magnético e alterar os polos do disco. (0,1)

-Organização e formatação de dados:
    A cabeça é um dispositivo pequeno, capaz de ler ou escrever sobre uma região do prato que gira embaixo dela;
    Isso resulta em uma organização dos dados no prato em forma de aneis, denominados trilhas;
    Cada trilha tem a mesma largura da cabeça;
    Existem, tipicamente, 500 a 2.000 trilhas por superfície.
    As trilhas são separadas em setores. E os setores e trilhas são separados por uma lacuna. (Ajudar na separação e evitar erros de alinhamento da cabeça).

    Os dados são transferidos do e para o HD em blocos;
    Normalmente um bloco tem tamanho menos que um setor.
    Para simplificar o circuito eletronico, as trilhas e externas (maiores) e internas (menores) possuem a mesma quantidade de bits.

    CAV - Capacidade Angular Constante 

-Velocidade do disco:
    Bit prox do centro do disco girando é mais lento que o bit da borda
    Aumente espaço entre bits de diferentes trilhas 
    Gire disco em velocidade angular constante CAV
    Pode-se usar zonas para aumentar Capacidade
        -Os sistemas modernos usam uma tecnica conhecida por gravação em múltilhas zonas
    
As trilhas em posições correspondentes nos diferentes discos constituem os cilindros do disco.
O sistema requer a existência de algum mecanismo para localizar um setor dentro de uma trilha.
    -Ponto de inicio
    -Maneira de identificar inicio e fim de cada setor

O campo ID é um identificador ou endereço para localizar um determinado setor.
O byte SYNCH tem um padrão de bits que indica o início de um campo 
Os campos de ID tem um espaço para código de correção de erros.

-Características mais imprtantes dos diversos tipos de discos magneticos:
    Movimento da cabeça 
        Cabeçote fixo (um por trilha)
        Cabeçote móvel (um por superfície)
    Transportabilidade do disco 
        Disco não-removivel (Fixado na uidade de disco) ->"UNIDADE DE DISCO: Possui um braço, o eixo e o circuito de E/S."
        Disco removível (O disco pode ser removido da unidade)
    Lados
        Lado único
        Duplo lado
    Pratos
        Prato único
        Múltiplos Pratos
    Mecanismo de cabeçote
        Contato (disquete)
        Espaço fixo
        Espaço aerodinâmico (Winchester)

-Disquete   
    Pequena capacidade (Até 1,44MB), barato, lento, inseguro e obsoleto.
Na maioria dos discos a cobertura magnétisável se dá nos dois lados, o chamado dupla face.
Algumas unidades usam múltiplos pratos, empilhados verticalmente e separados minimamente.
São utilizados braços multiplos.

-Classificação dos 3 tipos de disco:
    1) Existe uma fina camada de ar entre a cabeça e o prato
    2) A cabaça encosta no disco.
    3) Quanto mais estreita a cabeça, mais próximo ela deve estar da superfície do prato para evitar erros.
Porém quanto mais proximos, mais será o risco de erros devido a impurezas. (Tem que ser muito limpo o ambiente).
Um avanço na trecnologia foi obtido com o desenvolvimento do Winchester=.
    ->Desenvolvido pela IBM na cidade de mesmo nome no USA.
    ->Universal
    ->Barato
    ->Armazenamento externo mais rápido 
    ->Tornando-se maior o tempo todo
    ->Usados até hoje
    ->Completamente lacrado
    ->A pressão do ar faz a lâmina flutuar sobre o disco.
    ->Atualmente é mais conhecido como Disco Rígido.

-Parâmetro de desempenho de disco:
    ->do sistema de computação
    ->do sistema operacional
    ->do hardware usado no cana de E/S e no controladr de disco.
Quando uma unidade de disco está em operação ela gira em velocidade constante.
Para ler ou escrever , a cabeça deve ser posicionada sobre a trilha desejada e no inicio do setor desejado da trilha.
O tempo para posicionar a cabeça na trilha é chamado de "Tempo de Busca".
O tempo decorrido ate que o inicio do setor esteja sob acabeça é denominado de 'atraso de rotacional'.
Quando um processo requisita uma E/S, ele espera em uma fila até que o dispositivo esteja disponível.

AULA B:

Além do tempo de acesso e do tempo de transferencia, existem outros atrasos associados a uma operação de E/S em disco.

Em alguns sistemas possuem um sistema que enconstra a posição de rotação
-Funciona da seguinte maneira:
    1-Quando se inicia uma busca no disco, o canal é liberado para outras operações de E/SEGUNDO
    2-Quando finalizada a busca, o disp. determina quando os dados estarão posicionados sob a cabeça.
    3-Quando o setor requerido se aproxina, ele libera a rotação *TALVEZ N SEJA ISSO*
    4- ...

TEMPO DE BUSCA
Tempo de busca pode ser aproximado por =
    Ts = m * n + s
    onde Ts = tempo estimado de busca
         m  = constante que depende da unidade de disco
         n  = numero de trilhas percorridas
         s  = tempo de partida


Os discos giram tipicamente a 3600rpm, ou seja, efetuam uma revolução a cada 16,9 ms.
 3600 por min = 60 por seg -> 1/60 = 0,016666

 TEMPO TOTAL DE ACESSO MEDIO:
    Ta = Ts + 1/2r + b/rN 
    onde b = numero de bytes transmitidos 
         N = numero de bytes na trilha 
         r = velocidade de rotação em revoluções por segundo

Não se pode confiar em tempos medios.


[...]


CONTROLADORES:
    Usam processadores dedicados, com buffers de disco com capacidade de 64 kbytes a 1 Mbyte, usando SRAM
    As principais estratégias de acesso são:
    -LEITURA ADIANTADA: técnica adequada para fluxos de acesso sequencial. Quando há mais de um fluxo sequencial previsto, o buffer pode ser segmentado. O controlador pode ou
    não manter bloco no buffer uma vez que ele tenha sido acessado.
    -LEITURA NA CHEGADA: assim que a cabeça está posicionada sobre a trilha correta, inicia a transferência de dados para o buffer. O problema desta abordagem está no tamanho das
    trilhas, que tem aumentado muito, assim, pode acontecer do buffer não ter capacidade para armazenar toda a trilha.

    O uso do buffer para escrita reduz latência, evita acesso
desnecessário ao mecanismo em caso de reescrita e permite
escalonar acessos ao mecanismo.

RAID:
    A melhoria de desempenho das memorias secundárias tem sido bem mais lento que a memoria prncipal.
    A indústria adotou o RAID como um padrão para projetar bancos de dados de vários discos., pois possuiam muitas 
maneiras de projeta-los, fazendo a implementação muito dificil por serem diferentes.

RAID 0
N redundante
Dados espalhados
maior velocidade

RAID 1
disco espelhado
dados espalhados pelo disco
2 copias de cada stripe(tira)
leitura em qualquer um deles
gravação em ambos
recuperação é simples
caro

RAID 2
Discos sicronizados
Stripes pequenos
correção de erro calculada pelos bits correspondentes no disco
muita redundancia

RAID 3
Semelhante ao RAID 2
Somente um disco redundante, n importa o tamanho do array
Bit de paridade simples para cada conjunto de bytes correspondentes

RAID 4
cada dispositivo opera independentemente 
bom para taxa de solicitalçao de E/S
paridade bit a bit
paridade armazenada no disco de paridade

RAID 5
Como RAID 4
Paridade espalhada por todo o discoevita o gargalho do raid 4
normalmente usadfo em servidores de rede 

RAID 6
Dois calculos de paridade 
armazenamentos em bloco separadfs em disco diferentes
requisito di usuário de N

